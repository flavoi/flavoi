{% extends 'base.html' %}

{% block title %}achievements{% endblock %}

{% block extrahead %}
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/progress-bar.css" />
{% endblock extrahead %}

{% block extralevel %}level-two{% endblock %}
{% block achievements %}current parent{% endblock %}
{% block nav_achievements %}
    <ul>
        <li><a href="{% url 'achievements' %}" title="all-history" class="{{ history_link_class }}">All History</a></li>
        <li><a href="{% url 'year_archive' current_year %}" title="this-year" class="{{ year_link_class }}">This Year</a></li>
        <li><a href="{% url 'month_archive' current_year current_month %}" title="this-month" class="{{ month_link_class }}">This Month</a></li>
    </ul>
{% endblock %}

{% block content %}
    <article class="post" role="article" itemscope itemtype="http://schema.org/BlogPosting"><!-- .post start -->
        <header><!-- header start -->
            <h2 class="page-title" itemprop="headline">Achievements</h2>
        </header><!-- header end -->
        <section class="post-content clearfix" itemprop="articleBody"><!-- .post-content start -->
            {% if published_goals %}
                {% for goal in published_goals %}
                    <h3>
                            {% ifequal goal.percentage 100 %}
                                <i class="fa fa-trophy"></i>
                            {% endifequal %}
                            {{ goal.title }}
                    </h3>
                    <p>
                        <strong>Created:</strong> {{ goal.created }} | <strong>Updated:</strong> {{ goal.modified }}
                    </p>

                    {{ goal.abstract|safe }}

                    <div class="progress">
                      <div class="progress-bar 
                        {% ifequal goal.percentage 100 %}
                            progress-bar-success
                        {% else %}
                            progress-bar-striped active 
                        {% endifequal %}" role="progressbar" aria-valuenow="{{ goal.percentage }}" aria-valuemin="0" aria-valuemax="100" style="width:{{ goal.percentage}}%;">
                        <div class="content">{{ goal.percentage }}%</div>
                      </div>
                    </div>

                    <h4>
                        <a href="{% url 'achievement_detail' current_year current_month goal.pk %}" title="read-more">read more ></a>
                    </h4>

                    <hr/>
                {% endfor %}

                {% if is_paginated %}
                    <div class="pagination">
                        <span class="page-links">
                            {% if page_obj.has_previous %}
                                <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                            {% endif %}
                            <span class="page-current">
                                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                            </span>
                            {% if page_obj.has_next %}
                                <a href="?page={{ page_obj.next_page_number }}">next</a>
                            {% endif %}
                        </span>
                    </div>
                {% endif %}
                
            {% else %}
                <h4>The aren't any goals :(</h4>
            {% endif %}
        </section><!-- .post-content end -->
    </article><!-- .post end -->
{% endblock %}